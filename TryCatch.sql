SET XACT_ABORT OFF

BEGIN TRANSACTION
	BEGIN TRY
		UPDATE	Players
		SET		Balance = Balance - 1
		WHERE	ID = 1
		
		UPDATE	Players
		SET		Balance = Balance + 1 / 0
		WHERE	ID = 2
		
		COMMIT TRANSACTION
	END TRY
	BEGIN CATCH
		SELECT ERROR_NUMBER(), ERROR_MESSAGE()
		SELECT ERROR_LINE()
		
		SELECT XACT_STATE()
		
		ROLLBACK TRANSACTION
	END CATCH


GO

SELECT * FROM Players